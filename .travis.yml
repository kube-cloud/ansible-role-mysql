---
language: python
services: docker

# Environments variables for test
env:

    # Global
    global:
        - ROLE_NAME: initserver
        - AUTHOR: jetune
    matrix:
        - MOLECULE_DISTRO: centos6
        - MOLECULE_DISTRO: centos7
        - MOLECULE_DISTRO: ubuntu16
        - MOLECULE_DISTRO: ubuntu18

# Before install actions
before_install:
    - docker pull kubecloudsas/docker-ansible-test:centos6
    - docker pull kubecloudsas/docker-ansible-test:centos7
    - docker pull kubecloudsas/docker-ansible-test:ubuntu16
    - docker pull kubecloudsas/docker-ansible-test:ubuntu18

install:
  # Install test dependencies.
  - pip install molecule docker

script:
  # Run tests.
  - molecule test --all

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
